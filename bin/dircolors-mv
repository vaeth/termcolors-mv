#!/usr/bin/env sh
set -u
case ${TERM-} in
	*256*)
		color=:;;
	*88*|*rxvt-unicode*|linux)
		color=;;
	*[aeEkx]term*|*rxvt*|*konsole*|*gnome*|*putty*)
		color=:;;
	*)
		color=:
		num=`tput colors 2>/dev/null` && case ${num:-q} in
		*[!0123456789]*)
			false;;
		esac && [ "$num" -ge 256 ] || color=
esac
case ${SOLARIZED:-n} in
[nNfF]*|[oO][fF]*|0|-)
	SOLARIZED=;;
esac
Run() {
	r=$1
	shift
	for s in ${SOLARIZED:+"$r-solarized"} "$r"
	do	for f in ${color:+"$s"-256} "$s"
		do	test -r "$f" || continue
			exec dircolors ${1+"$@"} -- "$f"
			exit
		done
	done
}
for p in \
	${DEFAULTS:+"$DEFAULTS/dir_colors"} \
	${DEFAULTS:+"$DEFAULTS/dircolors"} \
	'/etc/dir_colors' \
	'/etc/dircolors' \
	"$HOME/.dir_colors" \
	"$HOME/.dircolors" \
	"$HOME/.config/dir_colors" \
	"$HOME/.config/dircolors"
do	test -d "$p" || continue
	Run "$p/DIR_COLORS" ${1+"$@"}
	Run "$p/dir_colors" ${1+"$@"}
	Run "$p/dircolors" ${1+"$@"}
done
for p in \
	${DEFAULTS:+"$DEFAULTS"} \
	'/etc' \
	"$HOME/.config"
do	Run "$p/DIR_COLORS" ${1+"$@"}
	Run "$p/dir_colors" ${1+"$@"}
	Run "$p/dircolors" ${1+"$@"}
done
Run "$HOME/.dircolors" ${1+"$@"}
exit 2
